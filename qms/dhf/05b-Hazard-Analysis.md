# 05b-Hazard-Analysis

---
title: Hazard Analysis (FMEA)
document_id: DHF-05b
version: 1.1
status: DRAFT
owner: Safety Officer
created_date: 2026-01-09
risk_plan_ref: DHF-05a (Risk Management Plan)
---

# 1. Introduction
This document records the specific hazards, failure modes, and risk controls for the Okapi system. The risk acceptability matrix and scoring definitions (e.g., what "Severity 5" means) are defined in **[DHF-05a]**.

# 2. Risk Analysis Matrix

| Risk ID | Hazard / Failure Mode                                     | Cause of Failure | S | P | Risk Level | Risk Control Measure                                                                                                                                                                                           | New S | New P | New Level |
| :--- |:----------------------------------------------------------| :--- | :--- | :--- | :--- |:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| :--- | :--- | :--- |
| **RISK-001** | Unauthorized access to User Account / PHI                 | Phishing, weak password, or credential stuffing | 5 | 3 | **15 (High)** | **Requirement SYS-AUTH-003**: System shall enforce MFA.                                                                                                                                                        | 5 | 1 | **5 (Low)** |
| **RISK-002** | AI Suggestion Error (Incorrect Diagnosis)                 | Model bias, training data gap, or edge case pathology | 4 | 3 | **12 (Med)** | **Design Control**: "Clinician-in-the-loop" UI; requirement that all AI suggestions must be explicitly confirmed by a pathologist.                                                                             | 4 | 1 | **4 (Low)** |
| **RISK-003** | Data Corruption during Write-back to EHR                  | Network glitch or HL7/FHIR mapping error | 4 | 2 | **8 (Med)** | **Requirement IR-001**: Checksums and ACK/NACK validation for all EHR transactions.                                                                                                                            | 4 | 1 | **4 (Low)** |
| **RISK-004** | Loss of Connectivity (Hospital ↔ Cloud)                   | AWS outage or Hospital Firewall changes | 3 | 3 | **9 (Med)** | **Requirement SYS-REL-001**: Local cache of critical pending results; Retry logic for data sync.                                                                                                               | 3 | 1 | **3 (Low)** |
| **RISK-005** | Unauthorized Modification of AI Model                     | Insider threat or compromised CI/CD pipeline | 5 | 2 | **10 (Med)** | **SOP-ChangeControl**: Mandatory code reviews and Signed commits; **SYS-SEC-001**: Read-only model weights in production.                                                                                      | 5 | 1 | **5 (Low)** |
| **RISK-006** | Audit Log Failure / Tampering                             | Disk full or malicious log deletion | 3 | 2 | **6 (Low)** | **Requirement SYS-AUD-001**: Use of immutable cloud logging (AWS CloudWatch/S3 with Object Lock).                                                                                                              | 3 | 1 | **3 (Low)** |
| **RISK-009** | Cross-issuer identity collision                           | Treating `sub` as globally unique across IdPs/realms | 4 | 2 | **8 (Med)** | **SYS-AUTH-006**: Enforce uniqueness by `(provider_id, external_subject)` and use issuer-scoped lookups.                                                                                                       | 4 | 1 | **4 (Low)** |
| **RISK-010** | Privilege escalation due to group→role misconfiguration   | Incorrect IdP group mapping grants elevated roles | 5 | 2 | **10 (Med)** | **SYS-AUTH-009**: issuer-scoped mappings; default-deny unmapped groups; change control and review of mappings; verify via VVP integration lane.                                                                | 5 | 1 | **5 (Low)** |
| **RISK-011** | Unauthorized access due to IdP outage / degraded behavior | Operators bypass AuthN controls to restore access | 5 | 1 | **5 (Low)** | Define and follow outage procedures; fail closed by default (`SYS-AUTH-007`); document any break-glass workflow before enabling.                                                                               | 5 | 1 | **5 (Low)** |
| **RISK-013** | Delayed or missing access for authorized clinical users   | Group membership not updated, provisioning delayed, or mapping missing | 3 | 3 | **9 (Med)** | Centralized IdP provisioning + Okapi-local mappings (`SYS-AUTH-011`, `SYS-AUTH-012`); provide identity introspection endpoint (`SYS-AUTH-010`) for rapid troubleshooting; operational runbooks/change control. | 3 | 1 | **3 (Low)** |
| **RISK-014** | Incorrect permissions granted to a user                   | Wrong group membership or mapping drift grants inappropriate role | 4 | 2 | **8 (Med)** | Issuer-scoped mappings (`SYS-AUTH-009`); least privilege/default-deny; mapping change control + audit evidence (`SYS-AUD-001`); verification per VVP.                                                          | 4 | 1 | **4 (Low)** |
| **RISK-012** | Incorrect schema/seed state after deployment              | Manual SQL drift or partial initialization leads to wrong authz behavior | 4 | 2 | **8 (Med)** | **SYS-DATA-003**: Flyway-managed schema + baseline seed at startup; verification in VVP; avoid manual DB changes outside change control.                                                                       | 4 | 1 | **4 (Low)** |
| **RISK-007** | Unreported System Errors / User Frustration               | Complex bugs or usability issues are not reported, leading to "Shadow Workarounds" or safety risks. | 4 | 3 | **12 (Med)** | **Requirement SR-UX-01**: Implement "Echo" module for context-aware reporting; **SR-UX-02**: Auto-context capture.                                                                                             | 4 | 1 | **4 (Low)** |
| **RISK-008** | User Fatigue / Glare (Visual Impairment)                  | Mismatch between screen brightness/theme and ambient lighting (e.g., bright light mode in a dark reading room). | 3 | 4 | **12 (Med)** | **Requirement SR-UX-04**: User-selectable Theme Modes (System/Dark/Light).                                                                                                                                     | 3 | 1 | **3 (Low)** |

| **RISK-HAT-001** | Wrong-asset action performed (e.g., wrong slide/block scanned or selected) | Identifier ambiguity, poor normalization, UI ambiguity, or bypass of scan confirmation | 4 | 3 | **12 (Med)** | `SYS-HAT-001`/`SYS-HAT-002`: deterministic scan/lookup outcomes; `SYS-HAT-009`: scan-confirmed execution; append-only history (`SYS-HAT-005`) for investigation. | 4 | 1 | **4 (Low)** |
| **RISK-HAT-002** | Loss of chain-of-custody / misplaced asset | Missing/incorrect custody/location recording; manual workarounds; lack of history | 4 | 3 | **12 (Med)** | `SYS-HAT-004`: authoritative current state; `SYS-HAT-005`/`SYS-HAT-006`: append-only history + correction events; `SYS-HAT-013`: RBAC; operational procedures. | 4 | 1 | **4 (Low)** |
| **RISK-HAT-003** | Unauthorized external distribution / release of material | Insufficient governance for high-risk actions; privilege escalation; missing approvals | 5 | 2 | **10 (Med)** | `SYS-HAT-013`: fine-grained RBAC + governance/approvals per policy; `SYS-HAT-010`: completion evidence (destination/tracking/receipt); audit traceability (`SYS-HAT-014`). | 5 | 1 | **5 (Low)** |
| **RISK-HAT-004** | Privacy breach through search/display of patient-identifying information | Overly broad search fields; insufficient role scoping; logs/screens expose identifiers beyond policy | 4 | 2 | **8 (Med)** | `SYS-HAT-003`: privacy-limited search modes; `SYS-HAT-013`: RBAC; log hygiene; deployment policy constraints. | 4 | 1 | **4 (Low)** |
| **RISK-HAT-005** | Incorrect state due to source-system mismatch | CoPath/Beaker/physical reality disagree; no explicit reconciliation path; silent overwrites | 3 | 3 | **9 (Med)** | `SYS-HAT-012`: explicit conflict + resolution events with provenance; `SYS-HAT-004`: authoritative current state with provenance. | 3 | 1 | **3 (Low)** |
| **RISK-WL-001** | **Missed Urgent Case** due to filtering error | System filter hides a STAT case from the pathologist's view | 5 | 3 | **15 (High)** | **SYS-WL-008**: "Needs Attention" smart filter defaults; **SYS-WL-001**: <30s latency requirement; "Safe Default" listing (show all if filter fails). | 5 | 1 | **5 (Low)** |
| **RISK-WL-002** | Clinical decision based on **Stale Data** | Pathologist opens a case believing slides are ready, but WSI failed | 3 | 4 | **12 (Med)** | **SYS-WL-005**: Async enrichment with explicit "Loading/Updating" states; Timestamp visibility. | 3 | 1 | **3 (Low)** |
| **RISK-WL-003** | **Workflow Deadlock** (Collision) | Two pathologists unknowingly edit the same case, overwriting work | 3 | 3 | **9 (Med)** | **SYS-WL-006**: "Draft in Progress" status visibility; Locking mechanism in authoring module (traced to Authoring Spec). | 3 | 1 | **3 (Low)** |

# 3. Conclusion
All identified risks are mitigated to an acceptable level (Low) through the implementation of the specified functional requirements and design controls.