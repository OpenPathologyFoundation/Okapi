Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v4.0.2)

2026-01-28T11:28:18.338-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : Starting OkapiAuthApplication using Java 25.0.1 with PID 35320 (/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main started by pg in /Users/pg/IdeaProjects/Okapi/auth-system)
2026-01-28T11:28:18.339-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : No active profile set, falling back to 1 default profile: "default"
2026-01-28T11:28:18.652-05:00  INFO 35320 --- [okapi-auth-system] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-28T11:28:18.683-05:00  INFO 35320 --- [okapi-auth-system] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 9 JPA repository interfaces.
2026-01-28T11:28:18.889-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2026-01-28T11:28:18.895-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-28T11:28:18.895-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-01-28T11:28:18.916-05:00  INFO 35320 --- [okapi-auth-system] [           main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 558 ms
2026-01-28T11:28:19.071-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-28T11:28:19.140-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2c815fdc
2026-01-28T11:28:19.140-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-28T11:28:19.152-05:00  INFO 35320 --- [okapi-auth-system] [           main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/okapi_auth (PostgreSQL 16.11)
2026-01-28T11:28:19.181-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "public"."flyway_schema_history" does not exist yet
2026-01-28T11:28:19.182-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbValidate     : Successfully validated 4 migrations (execution time 00:00.008s)
2026-01-28T11:28:19.193-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "public"."flyway_schema_history" ...
2026-01-28T11:28:19.226-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Current version of schema "public": << Empty Schema >>
2026-01-28T11:28:19.235-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "1 - init schema"
2026-01-28T11:28:19.313-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "2 - seed reference data"
2026-01-28T11:28:19.326-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "3 - add identity display name fields"
2026-01-28T11:28:19.326-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.c.i.s.DefaultSqlScriptExecutor       : +----------+
| ?column? |
+----------+
| 1        |
+----------+

2026-01-28T11:28:19.332-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "4 - worklist read model"
2026-01-28T11:28:19.354-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Successfully applied 4 migrations to schema "public", now at version v4 (execution time 00:00.094s)
2026-01-28T11:28:19.388-05:00  INFO 35320 --- [okapi-auth-system] [           main] org.hibernate.orm.jpa                    : HHH008540: Processing PersistenceUnitInfo [name: default]
2026-01-28T11:28:19.416-05:00  INFO 35320 --- [okapi-auth-system] [           main] org.hibernate.orm.core                   : HHH000001: Hibernate ORM core version 7.2.1.Final
2026-01-28T11:28:19.592-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-28T11:28:19.618-05:00  WARN 35320 --- [okapi-auth-system] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-28T11:28:19.626-05:00  INFO 35320 --- [okapi-auth-system] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [jdbc:postgresql://localhost:5433/okapi_auth]
        Database driver: PostgreSQL JDBC Driver
        Database dialect: PostgreSQLDialect
        Database version: 16.11
        Default catalog/schema: okapi_auth/public
        Autocommit mode: undefined/unknown
        Isolation level: READ_COMMITTED [default READ_COMMITTED]
        JDBC fetch size: none
        Pool: DataSourceConnectionProvider
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2026-01-28T11:28:20.094-05:00  INFO 35320 --- [okapi-auth-system] [           main] org.hibernate.orm.core                   : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-28T11:28:20.127-05:00  INFO 35320 --- [okapi-auth-system] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-28T11:28:20.163-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-28T11:28:20.261-05:00  WARN 35320 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setOauth2UserService(org.springframework.security.oauth2.client.userinfo.OAuth2UserService)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:28:20.261-05:00  WARN 35320 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setClaimTypeConverterFactory(java.util.function.Function)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:28:20.261-05:00  WARN 35320 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setRetrieveUserInfo(java.util.function.Predicate)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:28:20.273-05:00  WARN 35320 --- [okapi-auth-system] [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminSeedController' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/controller/AdminSeedController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'identitySeedService' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/service/seed/IdentitySeedService.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'keycloakAdminClient' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/service/keycloak/KeycloakAdminClient.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.web.client.RestClient$Builder' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2026-01-28T11:28:20.273-05:00  INFO 35320 --- [okapi-auth-system] [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-28T11:28:20.274-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-28T11:28:20.275-05:00  INFO 35320 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-28T11:28:20.276-05:00  INFO 35320 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2026-01-28T11:28:20.278-05:00  INFO 35320 --- [okapi-auth-system] [           main] .s.b.a.l.ConditionEvaluationReportLogger :

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-28T11:28:20.286-05:00 ERROR 35320 --- [okapi-auth-system] [           main] o.s.b.d.LoggingFailureAnalysisReporter   :

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.okapi.auth.service.keycloak.KeycloakAdminClient required a bean of type 'org.springframework.web.client.RestClient$Builder' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.web.client.RestClient$Builder' in your configuration.


> Task :bootRun FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':bootRun'.
> Process 'command '/Library/Java/JavaVirtualMachines/amazon-corretto-25.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to generate a Build Scan (powered by Develocity).
> Get more help at https://help.gradle.org.

BUILD FAILED in 3s
4 actionable tasks: 1 executed, 3 up-to-date
pg@Mac auth-system % ./gradlew bootRun

> Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v4.0.2)

2026-01-28T11:31:01.148-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : Starting OkapiAuthApplication using Java 25.0.1 with PID 35769 (/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main started by pg in /Users/pg/IdeaProjects/Okapi/auth-system)
2026-01-28T11:31:01.149-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : No active profile set, falling back to 1 default profile: "default"
2026-01-28T11:31:01.444-05:00  INFO 35769 --- [okapi-auth-system] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-28T11:31:01.476-05:00  INFO 35769 --- [okapi-auth-system] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 9 JPA repository interfaces.
2026-01-28T11:31:01.686-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2026-01-28T11:31:01.691-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-28T11:31:01.691-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-01-28T11:31:01.709-05:00  INFO 35769 --- [okapi-auth-system] [           main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 543 ms
2026-01-28T11:31:01.857-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-28T11:31:01.931-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@425b5fe2
2026-01-28T11:31:01.931-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-28T11:31:01.942-05:00  INFO 35769 --- [okapi-auth-system] [           main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/okapi_auth (PostgreSQL 16.11)
2026-01-28T11:31:01.979-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbValidate     : Successfully validated 4 migrations (execution time 00:00.013s)
2026-01-28T11:31:02.004-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 4
2026-01-28T11:31:02.005-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
2026-01-28T11:31:02.038-05:00  INFO 35769 --- [okapi-auth-system] [           main] org.hibernate.orm.jpa                    : HHH008540: Processing PersistenceUnitInfo [name: default]
2026-01-28T11:31:02.067-05:00  INFO 35769 --- [okapi-auth-system] [           main] org.hibernate.orm.core                   : HHH000001: Hibernate ORM core version 7.2.1.Final
2026-01-28T11:31:02.242-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-28T11:31:02.270-05:00  WARN 35769 --- [okapi-auth-system] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-28T11:31:02.280-05:00  INFO 35769 --- [okapi-auth-system] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [jdbc:postgresql://localhost:5433/okapi_auth]
        Database driver: PostgreSQL JDBC Driver
        Database dialect: PostgreSQLDialect
        Database version: 16.11
        Default catalog/schema: okapi_auth/public
        Autocommit mode: undefined/unknown
        Isolation level: READ_COMMITTED [default READ_COMMITTED]
        JDBC fetch size: none
        Pool: DataSourceConnectionProvider
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2026-01-28T11:31:02.747-05:00  INFO 35769 --- [okapi-auth-system] [           main] org.hibernate.orm.core                   : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-28T11:31:02.803-05:00  INFO 35769 --- [okapi-auth-system] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-28T11:31:02.843-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-28T11:31:02.949-05:00  WARN 35769 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setOauth2UserService(org.springframework.security.oauth2.client.userinfo.OAuth2UserService)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:31:02.949-05:00  WARN 35769 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setClaimTypeConverterFactory(java.util.function.Function)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:31:02.949-05:00  WARN 35769 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setRetrieveUserInfo(java.util.function.Predicate)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:31:03.058-05:00  WARN 35769 --- [okapi-auth-system] [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'authzTokenService' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/service/AuthzTokenService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'jwtEncoder' defined in class path resource [com/okapi/auth/config/JwtConfig.class]: Failed to instantiate [org.springframework.security.oauth2.jwt.JwtEncoder]: Factory method 'jwtEncoder' threw exception with message: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
2026-01-28T11:31:03.059-05:00  INFO 35769 --- [okapi-auth-system] [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-28T11:31:03.060-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-28T11:31:03.061-05:00  INFO 35769 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-28T11:31:03.062-05:00  INFO 35769 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2026-01-28T11:31:03.065-05:00  INFO 35769 --- [okapi-auth-system] [           main] .s.b.a.l.ConditionEvaluationReportLogger :

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-28T11:31:03.070-05:00 ERROR 35769 --- [okapi-auth-system] [           main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userController' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/controller/UserController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'authzTokenService' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/service/AuthzTokenService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'jwtEncoder' defined in class path resource [com/okapi/auth/config/JwtConfig.class]: Failed to instantiate [org.springframework.security.oauth2.jwt.JwtEncoder]: Factory method 'jwtEncoder' threw exception with message: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1382) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1221) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1218) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1184) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1121) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:993) ~[spring-context-7.0.3.jar:7.0.3]
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:620) ~[spring-context-7.0.3.jar:7.0.3]
        at org.springframework.boot.web.server.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-web-server-4.0.2.jar:4.0.2]
        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:756) ~[spring-boot-4.0.2.jar:4.0.2]
        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-4.0.2.jar:4.0.2]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:321) ~[spring-boot-4.0.2.jar:4.0.2]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1365) ~[spring-boot-4.0.2.jar:4.0.2]
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-4.0.2.jar:4.0.2]
        at com.okapi.auth.OkapiAuthApplication.main(OkapiAuthApplication.java:10) ~[main/:na]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authzTokenService' defined in file [/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main/com/okapi/auth/service/AuthzTokenService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'jwtEncoder' defined in class path resource [com/okapi/auth/config/JwtConfig.class]: Failed to instantiate [org.springframework.security.oauth2.jwt.JwtEncoder]: Factory method 'jwtEncoder' threw exception with message: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1382) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1221) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:1225) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1704) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:912) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-7.0.3.jar:7.0.3]
        ... 21 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jwtEncoder' defined in class path resource [com/okapi/auth/config/JwtConfig.class]: Failed to instantiate [org.springframework.security.oauth2.jwt.JwtEncoder]: Factory method 'jwtEncoder' threw exception with message: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1362) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1194) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:565) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:525) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:333) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:371) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:331) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:201) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:1225) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1704) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1651) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:912) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-7.0.3.jar:7.0.3]
        ... 35 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.oauth2.jwt.JwtEncoder]: Factory method 'jwtEncoder' threw exception with message: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:183) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:72) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:152) ~[spring-beans-7.0.3.jar:7.0.3]
        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-7.0.3.jar:7.0.3]
        ... 49 common frames omitted
Caused by: java.lang.IllegalArgumentException: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
        at org.springframework.security.oauth2.jwt.NimbusJwtEncoder$SecretKeyJwtEncoderBuilder.computeAllowedAlgorithms(NimbusJwtEncoder.java:482) ~[spring-security-oauth2-jose-7.0.2.jar:7.0.2]
        at org.springframework.security.oauth2.jwt.NimbusJwtEncoder$SecretKeyJwtEncoderBuilder.<init>(NimbusJwtEncoder.java:469) ~[spring-security-oauth2-jose-7.0.2.jar:7.0.2]
        at org.springframework.security.oauth2.jwt.NimbusJwtEncoder.withSecretKey(NimbusJwtEncoder.java:450) ~[spring-security-oauth2-jose-7.0.2.jar:7.0.2]
        at com.okapi.auth.config.JwtConfig.jwtEncoder(JwtConfig.java:20) ~[main/:na]
        at com.okapi.auth.config.JwtConfig$$SpringCGLIB$$0.CGLIB$jwtEncoder$0(<generated>) ~[main/:na]
        at com.okapi.auth.config.JwtConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>) ~[main/:na]
        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-7.0.3.jar:7.0.3]
        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:398) ~[spring-context-7.0.3.jar:7.0.3]
        at com.okapi.auth.config.JwtConfig$$SpringCGLIB$$0.jwtEncoder(<generated>) ~[main/:na]
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
        at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:155) ~[spring-beans-7.0.3.jar:7.0.3]
        ... 52 common frames omitted
Caused by: com.nimbusds.jose.KeyLengthException: The secret length must be at least 256 bits
        at com.nimbusds.jose.crypto.impl.MACProvider.<init>(MACProvider.java:216) ~[nimbus-jose-jwt-10.4.jar:10.4]
        at com.nimbusds.jose.crypto.MACSigner.<init>(MACSigner.java:108) ~[nimbus-jose-jwt-10.4.jar:10.4]
        at org.springframework.security.oauth2.jwt.NimbusJwtEncoder$SecretKeyJwtEncoderBuilder.computeAllowedAlgorithms(NimbusJwtEncoder.java:479) ~[spring-security-oauth2-jose-7.0.2.jar:7.0.2]
        ... 63 common frames omitted


> Task :bootRun FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':bootRun'.
> Process 'command '/Library/Java/JavaVirtualMachines/amazon-corretto-25.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to generate a Build Scan (powered by Develocity).
> Get more help at https://help.gradle.org.

BUILD FAILED in 3s
4 actionable tasks: 3 executed, 1 up-to-date
pg@Mac auth-system % set -a
pg@Mac auth-system % source ./.env
pg@Mac auth-system % set +a
pg@Mac auth-system % env | grep -E '^(POSTGRES|OIDC)_'
OIDC_ISSUER_URI=http://localhost:8180/realms/okapi
OIDC_CLIENT_ID=okapi-client
OIDC_CLIENT_SECRET=okapi-secret
POSTGRES_DB=okapi_auth
POSTGRES_USER=okapi_service
POSTGRES_PASSWORD=postgres_dev_password
POSTGRES_PORT=5433
pg@Mac auth-system %
pg@Mac auth-system %
pg@Mac auth-system %
pg@Mac auth-system % ./gradlew bootRun

> Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v4.0.2)

2026-01-28T11:49:36.128-05:00  INFO 38443 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : Starting OkapiAuthApplication using Java 25.0.1 with PID 38443 (/Users/pg/IdeaProjects/Okapi/auth-system/build/classes/java/main started by pg in /Users/pg/IdeaProjects/Okapi/auth-system)
2026-01-28T11:49:36.129-05:00  INFO 38443 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : No active profile set, falling back to 1 default profile: "default"
2026-01-28T11:49:36.431-05:00  INFO 38443 --- [okapi-auth-system] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-28T11:49:36.462-05:00  INFO 38443 --- [okapi-auth-system] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 9 JPA repository interfaces.
2026-01-28T11:49:36.667-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.s.boot.tomcat.TomcatWebServer          : Tomcat initialized with port 8080 (http)
2026-01-28T11:49:36.672-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-28T11:49:36.672-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/11.0.15]
2026-01-28T11:49:36.690-05:00  INFO 38443 --- [okapi-auth-system] [           main] b.w.c.s.WebApplicationContextInitializer : Root WebApplicationContext: initialization completed in 543 ms
2026-01-28T11:49:36.831-05:00  INFO 38443 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-28T11:49:36.902-05:00  INFO 38443 --- [okapi-auth-system] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@150f41b9
2026-01-28T11:49:36.902-05:00  INFO 38443 --- [okapi-auth-system] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-28T11:49:36.912-05:00  INFO 38443 --- [okapi-auth-system] [           main] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://localhost:5433/okapi_auth (PostgreSQL 16.11)
2026-01-28T11:49:36.940-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Schema history table "public"."flyway_schema_history" does not exist yet
2026-01-28T11:49:36.941-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbValidate     : Successfully validated 4 migrations (execution time 00:00.006s)
2026-01-28T11:49:36.952-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "public"."flyway_schema_history" ...
2026-01-28T11:49:36.984-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Current version of schema "public": << Empty Schema >>
2026-01-28T11:49:36.993-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "1 - init schema"
2026-01-28T11:49:37.077-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "2 - seed reference data"
2026-01-28T11:49:37.088-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "3 - add identity display name fields"
2026-01-28T11:49:37.089-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.c.i.s.DefaultSqlScriptExecutor       : +----------+
| ?column? |
+----------+
| 1        |
+----------+

2026-01-28T11:49:37.094-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Migrating schema "public" to version "4 - worklist read model"
2026-01-28T11:49:37.117-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.f.core.internal.command.DbMigrate      : Successfully applied 4 migrations to schema "public", now at version v4 (execution time 00:00.101s)
2026-01-28T11:49:37.149-05:00  INFO 38443 --- [okapi-auth-system] [           main] org.hibernate.orm.jpa                    : HHH008540: Processing PersistenceUnitInfo [name: default]
2026-01-28T11:49:37.179-05:00  INFO 38443 --- [okapi-auth-system] [           main] org.hibernate.orm.core                   : HHH000001: Hibernate ORM core version 7.2.1.Final
2026-01-28T11:49:37.353-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-28T11:49:37.380-05:00  WARN 38443 --- [okapi-auth-system] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-28T11:49:37.389-05:00  INFO 38443 --- [okapi-auth-system] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [jdbc:postgresql://localhost:5433/okapi_auth]
        Database driver: PostgreSQL JDBC Driver
        Database dialect: PostgreSQLDialect
        Database version: 16.11
        Default catalog/schema: okapi_auth/public
        Autocommit mode: undefined/unknown
        Isolation level: READ_COMMITTED [default READ_COMMITTED]
        JDBC fetch size: none
        Pool: DataSourceConnectionProvider
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2026-01-28T11:49:37.844-05:00  INFO 38443 --- [okapi-auth-system] [           main] org.hibernate.orm.core                   : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-28T11:49:37.875-05:00  INFO 38443 --- [okapi-auth-system] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-28T11:49:37.911-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.s.d.j.r.query.QueryEnhancerFactories   : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-28T11:49:38.007-05:00  WARN 38443 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setOauth2UserService(org.springframework.security.oauth2.client.userinfo.OAuth2UserService)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:49:38.007-05:00  WARN 38443 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setClaimTypeConverterFactory(java.util.function.Function)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:49:38.007-05:00  WARN 38443 --- [okapi-auth-system] [           main] o.s.aop.framework.CglibAopProxy          : Public final method [public final void org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService.setRetrieveUserInfo(java.util.function.Predicate)] cannot get proxied via CGLIB, consider removing the final marker or using interface-based JDK proxies.
2026-01-28T11:49:38.175-05:00  WARN 38443 --- [okapi-auth-system] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-28T11:49:38.367-05:00  INFO 38443 --- [okapi-auth-system] [           main] o.s.boot.tomcat.TomcatWebServer          : Tomcat started on port 8080 (http) with context path '/'
2026-01-28T11:49:38.370-05:00  INFO 38443 --- [okapi-auth-system] [           main] com.okapi.auth.OkapiAuthApplication      : Started OkapiAuthApplication in 2.403 seconds (process running for 2.556)
2026-01-28T14:07:05.103-05:00  INFO 38443 --- [okapi-auth-system] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-28T14:07:05.106-05:00  INFO 38443 --- [okapi-auth-system] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-28T14:07:05.122-05:00  INFO 38443 --- [okapi-auth-system] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 16 ms
Hibernate:
    select
        ie1_0.identity_id,
        ie1_0.attributes,
        ie1_0.created_at,
        ie1_0.created_by_identity_id,
        ie1_0.display_name,
        ie1_0.display_short,
        ie1_0.email,
        ie1_0.external_subject,
        ie1_0.family_name,
        ie1_0.given_name,
        ie1_0.is_active,
        ie1_0.last_seen_at,
        ie1_0.middle_name,
        ie1_0.prefix,
        ie1_0.provider_id,
        ie1_0.suffix,
        ie1_0.updated_at,
        ie1_0.updated_by_identity_id,
        ie1_0.username
    from
        iam.identity ie1_0
    where
        ie1_0.provider_id=?
        and ie1_0.external_subject=?
Hibernate:
    select
        ie1_0.identity_id,
        ie1_0.attributes,
        ie1_0.created_at,
        ie1_0.created_by_identity_id,
        ie1_0.display_name,
        ie1_0.display_short,
        ie1_0.email,
        ie1_0.external_subject,
        ie1_0.family_name,
        ie1_0.given_name,
        ie1_0.is_active,
        ie1_0.last_seen_at,
        ie1_0.middle_name,
        ie1_0.prefix,
        ie1_0.provider_id,
        ie1_0.suffix,
        ie1_0.updated_at,
        ie1_0.updated_by_identity_id,
        ie1_0.username
    from
        iam.identity ie1_0
    where
        ie1_0.email=?
2026-01-28T14:23:00.754-05:00 ERROR 38443 --- [okapi-auth-system] [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception

org.springframework.dao.InvalidDataAccessApiUsageException: Could not serialize object of java type: java.util.Map<java.lang.String, java.lang.Object>
        at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:365) ~[spring-orm-7.0.3.jar:7.0.3]
        at org.springframework.orm.jpa.hibernate.HibernateExceptionTranslator.translateExceptionIfPossible(HibernateExceptionTranslator.java:112) ~[spring-orm-7.0.3.jar:7.0.3]
        at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:199) ~[spring-orm-7.0.3.jar:7.0.3]
        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:556) ~[spring-orm-7.0.3.jar:7.0.3]
        at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:346) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:157) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:166) ~[spring-data-jpa-4.0.2.jar:4.0.2]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:222) ~[spring-aop-7.0.3.jar:7.0.3]
        at jdk.proxy2/jdk.proxy2.$Proxy146.save(Unknown Source) ~[na:na]
        at com.okapi.auth.service.CustomOidcUserService.loadUser(CustomOidcUserService.java:159) ~[main/:na]
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
        at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:158) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:719) ~[spring-aop-7.0.3.jar:7.0.3]
        at com.okapi.auth.service.CustomOidcUserService$$SpringCGLIB$$0.loadUser(<generated>) ~[main/:na]
        at org.springframework.security.oauth2.client.oidc.authentication.OidcAuthorizationCodeAuthenticationProvider.authenticate(OidcAuthorizationCodeAuthenticationProvider.java:158) ~[spring-security-oauth2-client-7.0.2.jar:7.0.2]
        at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:183) ~[spring-security-core-7.0.2.jar:7.0.2]
        at org.springframework.security.oauth2.client.web.OAuth2LoginAuthenticationFilter.attemptAuthentication(OAuth2LoginAuthenticationFilter.java:201) ~[spring-security-oauth2-client-7.0.2.jar:7.0.2]
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:249) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:239) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.oauth2.client.web.OAuth2AuthorizationRequestRedirectFilter.doFilterInternal(OAuth2AuthorizationRequestRedirectFilter.java:195) ~[spring-security-oauth2-client-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:110) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:96) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:118) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:237) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:195) ~[spring-security-web-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:317) ~[spring-security-config-7.0.2.jar:7.0.2]
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:355) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:272) ~[spring-web-7.0.3.jar:7.0.3]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:199) ~[spring-web-7.0.3.jar:7.0.3]
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-7.0.3.jar:7.0.3]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:107) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:77) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1778) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:946) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:480) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:57) ~[tomcat-embed-core-11.0.15.jar:11.0.15]
        at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]
Caused by: java.lang.IllegalArgumentException: Could not serialize object of java type: java.util.Map<java.lang.String, java.lang.Object>
        at org.hibernate.type.format.jackson.JacksonJsonFormatMapper.toString(JacksonJsonFormatMapper.java:86) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.type.format.AbstractJsonFormatMapper.toString(AbstractJsonFormatMapper.java:33) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.type.descriptor.java.spi.FormatMapperBasedJavaType.toString(FormatMapperBasedJavaType.java:56) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.type.descriptor.java.spi.FormatMapperBasedJavaType.deepCopy(FormatMapperBasedJavaType.java:107) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.type.AbstractStandardBasicType.deepCopy(AbstractStandardBasicType.java:271) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.type.TypeHelper.deepCopy(TypeHelper.java:50) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.AbstractSaveEventListener.cloneAndSubstituteValues(AbstractSaveEventListener.java:344) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:215) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:133) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:145) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:89) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:73) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:49) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:138) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:689) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:672) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
        at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
        at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:317) ~[spring-orm-7.0.3.jar:7.0.3]
        at jdk.proxy2/jdk.proxy2.$Proxy136.persist(Unknown Source) ~[na:na]
        at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:664) ~[spring-data-jpa-4.0.2.jar:4.0.2]
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
        at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:278) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:169) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:545) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:290) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:690) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:171) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:146) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69) ~[spring-data-commons-4.0.2.jar:4.0.2]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:133) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:130) ~[spring-tx-7.0.3.jar:7.0.3]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-7.0.3.jar:7.0.3]
        at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:135) ~[spring-tx-7.0.3.jar:7.0.3]
        ... 80 common frames omitted
Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module "com.fasterxml.jackson.datatype:jackson-datatype-jsr310" to enable handling (or disable `MapperFeature.REQUIRE_HANDLERS_FOR_JAVA8_TIMES`) (through reference chain: java.util.HashMap["exp"])
        at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1359) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:34) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:807) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeWithoutTypeInfo(MapSerializer.java:763) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:719) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:34) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:503) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:423) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1583) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1289) ~[jackson-databind-2.20.2.jar:2.20.2]
        at com.fasterxml.jackson.databind.ObjectWriter.writeValueAsString(ObjectWriter.java:1140) ~[jackson-databind-2.20.2.jar:2.20.2]
        at org.hibernate.type.format.jackson.JacksonJsonFormatMapper.toString(JacksonJsonFormatMapper.java:83) ~[hibernate-core-7.2.1.Final.jar:7.2.1.Final]